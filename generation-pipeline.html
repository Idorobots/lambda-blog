<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Generation pipeline</title><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" /><link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.25.1/css/theme.bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="style/highlight.default.css" rel="stylesheet" type="text/css" /><link href="style/lambda-blog.css" rel="stylesheet" type="text/css" /><link href="index.xml" rel="alternate" title=" Feed" type="application/atom+xhtml" /><link href="media/logo.svg" rel="icon" type="image/png" /><script src="http://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.25.1/js/jquery.tablesorter.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="js/highlight.pack.js" type="text/javascript"></script><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="λ-blog v.1.0.7" name="generator" /></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button class="navbar-toggle navbar-brand pull-left" data-target="#navbar-responsive-collapse" data-toggle="collapse" type="button"><div><img src="media/logo.svg" />λ-blog</div></button><div class="hidden-xs"><a class="navbar-brand" href="."><div><img src="media/logo.svg" />λ-blog</div></a></div></div><div class="collapse navbar-collapse navbar-right" id="navbar-responsive-collapse"><ul class="nav navbar-nav"><li class="hidden-sm hidden-md hidden-lg"><a href="."><i class="fa fa-home"></i> Home page</a></li><li class="dropdown"><a href="#"><i class="fa fa-book"></i> Documentation<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="content-parsers.html">Content parsers</a></li><li><a href="entities.html">Entities</a></li><li><a href="generation-pipeline.html">Generation pipeline</a></li><li><a href="generator-middleware.html">Generator middleware</a></li><li><a href="html-templates.html">HTML templates</a></li></ul></li><li><a href="api"><i class="fa fa-list"></i> API</a></li><li><a href="https://github.com/Idorobots/lambda-blog"><i class="fa fa-github"></i> GitHub</a></li><li><a href="archives.html"><i class="fa fa-archive"></i> Archives</a></li><li><a href="index.xml"><i class="fa fa-feed"></i> Feed</a></li></ul></div></div></nav><div class="body-wrap"><article id="page"><div class="container"><header class="page-header"><div class="row"><div class="col-xs-12 col-sm-8 col-md-10"><h1 style="font-size: 300%;">λ-blog</h1><p style="font-size: 150%;">A static blog generator generator optimized for customizability.</p></div><div class="hidden-xs col-sm-2 col-md-1 pull-right"><img src="media/logo.svg" style="height: 120px;" /></div></div></header><h1><a name="generation&#95;pipeline"></a>Generation pipeline</h1><p>To actually generate anything with <strong>λ-blog</strong> we need to define a computation that will successively transform your content through different states into a bunch of static pages. We need a <em>pipeline</em>, if you will.</p><p>The generation pipline is quite literarily whatever you want it to be. Its purpose is to take your content and generate your static site with a <em>bunch of magic</em> happening inbetween over which you have <strong>total control</strong>. In fact, this <em>the</em> guiding principle behind <strong>λ-blog</strong> - it is optimized for customizability, so you can build a static blog generator tailored specifically to your needs.</p><h2><a name="the&#95;magic"></a>The magic</h2><p><strong>λ-blog</strong> comes with a few useful functions that simplify generation pipeline creation. These can be divided into three categories:</p><ul><li>Filesystem related functions, for example:<ul><li><code>read-dir</code></li><li><code>copy-dir!</code></li></ul></li><li>Entity manipulation functions, for example:<ul><li><code>update</code></li><li><code>whenever</code></li></ul></li><li>Site generation functions, for example:<ul><li><code>generate!</code></li></ul></li></ul><p>Detailed descriptions of these functions can be found in the <a href='https://idorobots.github.io/lambda-blog/api/lambda-blog.generator.html'><code>lambda-blog.generator</code></a> namespace.</p><h2><a name="building&#95;a&#95;pipeline"></a>Building a pipeline</h2><p>A sensible way to start building your generation pipeline is to define some sort of configuration entity (let's assume for a moment that we have <code>data/js</code> and <code>data/style</code> directories populated):</p><pre><code class="clojure">&#40;def config {:author &quot;Idorobots&quot;
             :title &quot;My kickass blog!&quot;
             :scripts &#91;&quot;js/script.js&quot;&#93;
             :stylesheets &#91;&quot;style/style.css&quot;
                           &quot;style/theme.css&quot;&#93;
             :output-dir &quot;out&quot;}&#41;
</code></pre><p>Next, we need a convenient way to repeatably generate the static site. A Clojure function is the way to go:</p><pre><code class="clojure">&#40;defn generate &#91;&#93;
  &#40;-&gt; config
      ;; The pipeline goes here.
      &#41;&#41;
</code></pre><p>Lastly, we need to build the actual pipeline. Let's start by adding an entity representing the page index:</p><pre><code class="clojure">&#40;-&gt; config
    &#40;assoc :index {:title &quot;Index&quot;}&#41;
    ;; ...
    &#41;
</code></pre><p>Next, read & parse some entries (again, assume that we have <code>data/entries</code> handy). Note, that we want the entries to appear in a sorted orded, hence the <code>update</code> call:</p><pre><code class="clojure">&#40;-&gt; config
    &#40;assoc :index {:title &quot;Index&quot;}&#41;
    &#40;read-dir :entries &quot;data/entries&quot; hello-parser&#41;
    &#40;update :entries
            #&#40;sort-by &#40;comp :timestamp :metadata&#41; %&#41;&#41;
    ;; ...
    &#41;
</code></pre><p>And finally, generate the site:</p><pre><code class="clojure">&#40;-&gt; config
    &#40;assoc :index {:title &quot;Index&quot;}&#41;
    &#40;read-dir :entries &quot;data/entries&quot; hello-parser&#41;
    &#40;update :entries
            #&#40;sort-by &#40;comp :timestamp :metadata&#41; %&#41;&#41;
    clean-dir!
    &#40;generate! :index some-index-template&#41;
    &#40;generate-all! :entries some-entry-template&#41;
    &#40;copy-dir! &quot;data/js&quot; &quot;js&quot;&#41;
    &#40;copy-dir! &quot;data/style&quot; &quot;style&quot;&#41;&#41;
</code></pre><p>Now, whenever <code>generate</code> is evaluated a fresh and (hopefully) repeatable instance of <code>My kickass blog!</code> will be generated.</p><footer><hr /><div class="row"><div class="text-center">All writing licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" style="border-width:0;" /></a>. All code released to the Public Domain unless otherwise specified.</div><div class="text-center"><p>Powered by <a href="https://github.com/Idorobots/lambda-blog">λ-blog</a>.</p></div></div></footer><script src="js/lambda-blog.js" type="text/javascript"></script></div></article></div></body></html>