<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Generator middleware</title><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" /><link href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.25.1/css/theme.bootstrap.min.css" rel="stylesheet" type="text/css" /><link href="style/highlight.default.css" rel="stylesheet" type="text/css" /><link href="style/lambda-blog.css" rel="stylesheet" type="text/css" /><link href="index.xml" rel="alternate" title="RSS Feed" type="application/rss+xhtml" /><link href="media/logo.svg" rel="icon" type="image/png" /><script src="http://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.25.1/js/jquery.tablesorter.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script><script src="js/highlight.pack.js" type="text/javascript"></script><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="λ-blog v.1.0.4" name="generator" /></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class="container navbar-inner"><div><button class="navbar-toggle navbar-brand pull-left" data-target=".navbar-responsive-collapse" data-toggle="collapse" type="button"><div><img src="media/logo.svg" />λ-blog</div></button><div class="hidden-xs"><a class="navbar-brand" href="."><div><img src="media/logo.svg" />λ-blog</div></a></div></div><div class="collapse navbar-collapse navbar-right navbar-responsive-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="#"><i class="fa fa-book"></i> Documentation<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="content-parsers.html">Content parsers</a></li><li><a href="entities.html">Entities</a></li><li><a href="generation-pipeline.html">Generation pipeline</a></li><li><a href="generator-middleware.html">Generator middleware</a></li><li><a href="html-templates.html">HTML templates</a></li></ul></li><li><a href="api"><i class="fa fa-list"></i> API</a></li><li><a href="https://github.com/Idorobots/lambda-blog"><i class="fa fa-github"></i> GitHub</a></li><li><a href="archives.html"><i class="fa fa-archive"></i> Archives</a></li><li><a href="index.xml"><i class="fa fa-feed"></i> RSS</a></li></ul></div></div></nav><div class="body-wrap"><article id="page"><div class="container"><header class="page-header"><div class="row"><div class="col-xs-12 col-sm-8 col-md-10"><h1 style="font-size: 300%;">λ-blog</h1><p style="font-size: 150%;">A static blog generator generator optimized for customizability.</p></div><div class="hidden-xs col-sm-2 col-md-1 pull-right"><img src="media/logo.svg" style="height: 120px;" /></div></div></header><h1>Generator middleware</h1><p>Often times it is desirable to transform an entity in one way or another during processing in the generation pipeline. A simple yet effective way to achieve that is to use the <em>middleware pattern</em>.</p><p>In <strong>λ-blog</strong> a middleware is a Clojure function that takes an entity as a parameter and returns an entity as a result:</p><pre><code class="clojure">&#40;defn hello-world-middleware &#91;entity&#93;
  &#40;assoc entity :hello :world&#41;&#41;
</code></pre><p>On the other hand, it might be useful to pass some additional argumentsx to a middleware. In this case, define a middleware builder:</p><pre><code class="clojure">&#40;defn hello-&#42;-middleware &#91;what&#93;
  &#40;fn &#91;entity&#93;
    &#40;assoc entity :hello what&#41;&#41;&#41;
</code></pre><h2>Using middleware</h2><p>By design, the middleware pattern is quite straightforward. All you need to do is to pipe some middleware functions in order you want them to execute:</p><pre><code class="clojure">&#40;-&gt; entity
    logging-middleware
    hello-world-middleware
    ;; ...
    &#41;
</code></pre><p>Things get tricky when we want to process nested entities. Fortunately, <strong>λ-blog</strong> has us covered with the <a href='https://idorobots.github.io/lambda-blog/api/lambda-blog.generator.html'><code>lambda-blog.generator</code></a> namespace:</p><ul><li><code>&#40;update entity key &amp; middleware&#41;</code> - applies each <code>middleware</code> function in order on the <code>&#40;entity key&#41;</code> subentity,</li><li><code>&#40;update-all entity key &amp; middleware&#41;</code> - same as <code>update</code>, but applies <code>middleware</code> functions to each element of a sequence of subentities under <code>&#40;entity key&#41;</code>,</li><li><code>&#40;whenever entity predicate? &amp; middleware&#41;</code> - applies each <code>middleware</code> function on the <code>entity</code></li></ul><h2>Builtin middleware functions</h2><p>A list of middleware available out of the box, as well as their descriptions can be found <a href='https://idorobots.github.io/lambda-blog/api/lambda-blog.middleware.html'>here</a>.</p><footer><hr /><div class="row"><div class="text-center">All writing licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" style="border-width:0;" /></a>. All code released to the Public Domain unless otherwise specified.</div><div class="text-center"><p>Powered by <a href="https://github.com/Idorobots/lambda-blog">λ-blog</a>.</p></div></div></footer><script src="js/lambda-blog.js" type="text/javascript"></script></div></article></div></body></html>